<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lot Map (Image Modal)</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        #map-container { position: relative; max-width: 2380px; margin: 2rem auto; }
        #map-image { width: 100%; height: auto; display: block; }
        #svg-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .lot-polygon { stroke: #333; stroke-width: 4px; cursor: pointer; transition: fill 0.2s ease, stroke-width 0.2s ease; }
        .lot-polygon:hover { fill-opacity: 0.7; stroke-width: 8px; }
        .lot-prime { fill: rgba(0, 123, 255, 0.4); }
        .lot-sunrise { fill: rgba(255, 193, 7, 0.4); }
        .lot-sunrise-corner { fill: rgba(253, 126, 20, 0.4); }
        .lot-corner-sunrise { fill: rgba(40, 167, 69, 0.4); }
        
        /* Style para sa image sa loob ng modal */
        #modalLotImage {
            width: 100%;
            height: auto;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body>

    <div class="container-fluid mt-4">
        <h1 class="text-center mb-4">Interactive Lot Map</h1>
        <p class="text-center text-muted">I-click ang isang lote para makita ang larawan.</p>

        <div id="map-container">
            <img id="map-image" src="./map.png" alt="Map of Lots">

            <svg id="svg-overlay" viewBox="0 0 2380 2380">
                <!-- 
                IMPORTANT: PALITAN ANG MGA URL DITO!
                Siguraduhin na ang path sa 'data-lot-image-url' ay tama.
                -->
                <polygon class="lot-polygon lot-sunrise-corner" points="1170,193 1223,383 1326,395 1502,315 1412,122" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="SC-01" data-lot-image-url="./images/cs2.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1328,399 1380,517 1557,431 1502,317" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-01" data-lot-image-url="./images/cs3.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1384,515 1439,635 1614,549 1557,437" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-02" data-lot-image-url="./images/cs3.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1436,636 1495,753 1671,667 1613,549" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-03" data-lot-image-url="./images/cs3.png"></polygon>
                <!-- Ipagpatuloy ang paglalagay ng tamang image URL para sa lahat ng lote -->
                <polygon class="lot-polygon lot-prime" points="1493,755 1550,873 1720,786 1667,671" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-04" data-lot-image-url="./images/cs3.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1547,873 1606,992 1779,904 1724,788" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-05" data-lot-image-url="./images/cs3.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1655,1097 1718,1223 1890,1135 1829,1013" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-06" data-lot-image-url="./images/cs4.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1716,1223 1783,1360 1976,1307 1888,1139" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-07" data-lot-image-url="./images/cs5.png"></polygon>
                <polygon class="lot-polygon lot-sunrise" points="1186,674 1341,631 1388,739 1217,787" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="S-01" data-lot-image-url="./images/cs6.png"></polygon>
                <polygon class="lot-polygon lot-sunrise" points="1215,788 1245,889 1436,836 1388,739" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="S-02" data-lot-image-url="./images/cs7.png"></polygon>
                <polygon class="lot-polygon lot-prime" points="1006,770 1033,854 1214,801 1197,715" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-08" data-lot-image-url="./images/cs8.png"></polygon>
            </svg>
        </div>
    </div>

    <!-- MODAL - UPDATED FOR IMAGE DISPLAY -->
    <div class="modal fade" id="lotModal" tabindex="-1" aria-labelledby="lotModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- modal-lg para mas malaki ang modal for pictures -->
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lotModalLabel">Larawan ng Lote</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <!-- Dito ilalagay ng JavaScript ang picture -->
                    <img src="" id="modalLotImage" alt="Larawan ng Lote" class="img-fluid">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript - UPDATED FOR IMAGE LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const lotModal = document.getElementById('lotModal');
            
            lotModal.addEventListener('show.bs.modal', function (event) {
                const triggerElement = event.relatedTarget;
                
                // Kunin ang Lot ID at ang Image URL mula sa na-click na polygon
                const lotId = triggerElement.getAttribute('data-lot-id');
                const lotImageUrl = triggerElement.getAttribute('data-lot-image-url');
                
                // Hanapin ang mga elements sa loob ng modal
                const modalTitle = lotModal.querySelector('.modal-title');
                const modalImage = lotModal.querySelector('#modalLotImage');

                // I-update ang title ng modal at ang source ng image
                modalTitle.textContent = 'Information: ' + lotId;
                modalImage.src = lotImageUrl;
            });
        });
    </script>

</body>
</html>