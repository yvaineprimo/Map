<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lot Map</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Simpleng CSS para siguradong gumana */
        body {
            background-color: #f8f9fa;
        }

        #map-container {
            position: relative;
            max-width: 2380px; /* Ang eksaktong lapad ng iyong image */
            margin: 2rem auto; /* Para i-center ang mapa at bigyan ng espasyo sa taas/baba */
        }

        #map-image {
            width: 100%;
            height: auto;
            display: block;
        }

        #svg-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Base style para sa lahat ng lote */
        .lot-polygon {
            stroke: #333;
            stroke-width: 4px;
            cursor: pointer;
            transition: fill 0.2s ease, stroke-width 0.2s ease;
        }

        /* Hover effect para sa lahat ng lote */
        .lot-polygon:hover {
            fill-opacity: 0.7;
            stroke-width: 8px;
        }

        /* --- Mga Kulay --- */
        .lot-prime { fill: rgba(0, 123, 255, 0.4); }
        .lot-sunrise { fill: rgba(255, 193, 7, 0.4); }
        .lot-sunrise-corner { fill: rgba(253, 126, 20, 0.4); }
        .lot-corner-sunrise { fill: rgba(40, 167, 69, 0.4); }
    </style>
</head>
<body>

    <div class="container-fluid mt-4">
        <h1 class="text-center mb-4">Interactive Lot Map</h1>
        <p class="text-center text-muted">I-click ang isang lote para makita ang detalye.</p>

        <div id="map-container">
            <!-- IMPORTANT: Siguraduhin na ang 'map.png' ay nasa parehong folder ng file na ito -->
            <img id="map-image" src="./map.png" alt="Map of Lots">

            <svg id="svg-overlay" viewBox="0 0 2380 2380">
                <!-- Dito mo ilalagay ang iyong totoong data -->
                <polygon class="lot-polygon lot-sunrise-corner" points="1170,193 1223,383 1326,395 1502,315 1412,122" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="SC-01" data-lot-type="Sunrise Corner" data-lot-area="350" data-lot-price-per-sqm="15000" data-lot-total-price="5250000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1328,399 1380,517 1557,431 1502,317" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-01" data-lot-type="Prime" data-lot-area="280" data-lot-price-per-sqm="12000" data-lot-total-price="3360000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1384,515 1439,635 1614,549 1557,437" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-02" data-lot-type="Prime" data-lot-area="290" data-lot-price-per-sqm="12000" data-lot-total-price="3480000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1436,636 1495,753 1671,667 1613,549" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-03" data-lot-type="Prime" data-lot-area="300" data-lot-price-per-sqm="12500" data-lot-total-price="3750000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1493,755 1550,873 1720,786 1667,671" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-04" data-lot-type="Prime" data-lot-area="295" data-lot-price-per-sqm="12500" data-lot-total-price="3687500"></polygon>
                <polygon class="lot-polygon lot-prime" points="1547,873 1606,992 1779,904 1724,788" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-05" data-lot-type="Prime" data-lot-area="310" data-lot-price-per-sqm="13000" data-lot-total-price="4030000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1655,1097 1718,1223 1890,1135 1829,1013" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-06" data-lot-type="Prime" data-lot-area="320" data-lot-price-per-sqm="13000" data-lot-total-price="4160000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1716,1223 1783,1360 1976,1307 1888,1139" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-07" data-lot-type="Prime" data-lot-area="400" data-lot-price-per-sqm="13500" data-lot-total-price="5400000"></polygon>
                <polygon class="lot-polygon lot-corner-sunrise" points="839,1545 990,1505 1018,1610 870,1652" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="CS-01" data-lot-type="Corner Sunrise" data-lot-area="250" data-lot-price-per-sqm="18000" data-lot-total-price="4500000"></polygon>
                <polygon class="lot-polygon lot-sunrise" points="1186,674 1341,631 1388,739 1217,787" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="S-01" data-lot-type="Sunrise" data-lot-area="240" data-lot-price-per-sqm="14000" data-lot-total-price="3360000"></polygon>
                <polygon class="lot-polygon lot-sunrise" points="1215,788 1245,889 1436,836 1388,739" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="S-02" data-lot-type="Sunrise" data-lot-area="260" data-lot-price-per-sqm="14000" data-lot-total-price="3640000"></polygon>
                <polygon class="lot-polygon lot-prime" points="1006,770 1033,854 1214,801 1197,715" data-bs-toggle="modal" data-bs-target="#lotModal" data-lot-id="P-08" data-lot-type="Prime" data-lot-area="200" data-lot-price-per-sqm="12000" data-lot-total-price="2400000"></polygon>
            </svg>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal fade" id="lotModal" tabindex="-1" aria-labelledby="lotModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lotModalLabel">Detalye ng Lote</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Lot ID:</strong> <span id="modalLotId"></span></p>
                            <p><strong>Uri ng Lote:</strong> <span id="modalLotType" class="badge bg-primary"></span></p>
                            <p><strong>Sukat (Area):</strong> <span id="modalLotArea"></span> sqm</p>
                            <p><strong>Presyo / sqm:</strong> <span id="modalPricePerSqm"></span></p>
                        </div>
                        <div class="col-md-6">
                            <h5>Kabuuang Presyo:</h5>
                            <h3 class="text-success fw-bold" id="modalTotalPrice"></h3>
                        </div>
                    </div>
                    <hr>
                    <h5 class="mt-3">Sample Monthly Payment Computation</h5>
                    <table class="table table-striped mt-2">
                        <thead>
                            <tr>
                                <th>Termino</th>
                                <th>Buwanang Hulog</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1 Taon (12 Months)</td>
                                <td id="modalMonthly1yr"></td>
                            </tr>
                            <tr>
                                <td>2 Taon (24 Months)</td>
                                <td id="modalMonthly2yr"></td>
                            </tr>
                            <tr>
                                <td>3 Taon (36 Months)</td>
                                <td id="modalMonthly3yr"></td>
                            </tr>
                        </tbody>
                    </table>
                    <small class="text-muted">*Ito ay sample computation lamang at maaaring magbago.</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Isara</button>
                    <button type="button" class="btn btn-primary">Mag-inquire</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const lotModal = document.getElementById('lotModal');
            
            const formatAsCurrency = (value) => {
                const number = parseFloat(value);
                if (isNaN(number)) { return "N/A"; }
                return number.toLocaleString('tl-PH', {
                    style: 'currency',
                    currency: 'PHP'
                });
            };

            lotModal.addEventListener('show.bs.modal', function (event) {
                const triggerElement = event.relatedTarget;
                
                const lotId = triggerElement.getAttribute('data-lot-id');
                const lotType = triggerElement.getAttribute('data-lot-type');
                const lotArea = triggerElement.getAttribute('data-lot-area');
                const pricePerSqm = triggerElement.getAttribute('data-lot-price-per-sqm');
                const totalPrice = triggerElement.getAttribute('data-lot-total-price');
                
                const modalTitle = lotModal.querySelector('.modal-title');
                const modalLotIdSpan = lotModal.querySelector('#modalLotId');
                const modalLotTypeSpan = lotModal.querySelector('#modalLotType');
                const modalLotAreaSpan = lotModal.querySelector('#modalLotArea');
                const modalPricePerSqmSpan = lotModal.querySelector('#modalPricePerSqm');
                const modalTotalPriceH3 = lotModal.querySelector('#modalTotalPrice');
                const modalMonthly1yrTd = lotModal.querySelector('#modalMonthly1yr');
                const modalMonthly2yrTd = lotModal.querySelector('#modalMonthly2yr');
                const modalMonthly3yrTd = lotModal.querySelector('#modalMonthly3yr');

                const totalPriceFloat = parseFloat(totalPrice);
                let monthly1yr = "N/A", monthly2yr = "N/A", monthly3yr = "N/A";
                if (!isNaN(totalPriceFloat)) {
                    monthly1yr = formatAsCurrency(totalPriceFloat / 12);
                    monthly2yr = formatAsCurrency(totalPriceFloat / 24);
                    monthly3yr = formatAsCurrency(totalPriceFloat / 36);
                }

                modalTitle.textContent = 'Detalye para sa: ' + lotId;
                modalLotIdSpan.textContent = lotId;
                modalLotTypeSpan.textContent = lotType;
                modalLotAreaSpan.textContent = lotArea;
                modalPricePerSqmSpan.textContent = formatAsCurrency(pricePerSqm);
                modalTotalPriceH3.textContent = formatAsCurrency(totalPrice);
                modalMonthly1yrTd.textContent = monthly1yr;
                modalMonthly2yrTd.textContent = monthly2yr;
                modalMonthly3yrTd.textContent = monthly3yr;
            });
        });
    </script>

</body>
</html>